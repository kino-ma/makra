# Evaluation
本システムの評価に使用したコード等をまとめたディレクトリである．

## 評価項目

* 処理時間
  * デバイスの起動から，カーネル起動までの時間
  * WebAssembly バイナリのコンパイル開始から，終了までの時間
  * コンパイル結果のバイナリを実行開始してから，終了するまでの時間
  * 上記すべてを合計した時間
* バイナリサイズ
  * システム全体をコンパイルした結果のバイナリサイズ

## 評価対象
* 本システム
* Linux OS (Raspberry Pi OS)
* ベアメタル
* 仮想マシン (WebAssembly Micro Runtime)

評価にあたっては，サンプルとしてある数の素数性を判定するプログラムを作成した．
`prime.wat` がその WebAssembly プログラムであり，本システム及び WebAssembly インタープリタにおける計測に利用した．
`prime.rs` は Rust プログラムであり， OS 上及びベアメタルでの評価に利用した．

## 計測
### 本システム
本システムの通常のビルドプロセスを踏み，コンパイル及び実行した．

```
# QEMU上での実行
make qemu
```

#### 結果
```
boot process took 1.1469 ms

compile process took 17.17770 ms

module call took 27.27302 ms

total: 46.46916 ms
```

### Raspberry Pi OS
OS が提供している機能を利用して，起動直後にバイナリを実行した．

### ベアメタル
`prime.rs` で記述されている関数を，デバイスの起動直後に呼び出すようなプログラムを作成した．

なお，タイマー機能などの必要性から，本システムの実装の一部を流用している．

#### 結果
```
boot process took: 1.1402 ms

compile process took: -

function call took: 2.2234 ms

total: 26.26017 ms
```

### 仮想マシン
本システムを一部流用し，本来コンパイルしている部分を仮想マシンによる実行に置き換えた．